// This is the minified and stringified code of the web-audio-beat-detector-worker package.
export const worker = `!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=(e,t,n)=>{const r=e.length,o=[];let s=!1;for(let a=0;a<r;a+=1)e[a]>t?s=!0:s&&(s=!1,o.push(a-1),a+=n/4-1);return s&&o.push(r-1),o},o=(e,t,n)=>{const o=(e=>{let t=0;const n=e.length;for(let r=0;r<n;r+=1)e[r]>t&&(t=e[r]);return t})(e),s=.3*o;let a=[],l=o-.05*o;if(o>.25)for(;a.length<30&&l>=s;)a=r(e,l,t),l-=.05*o;const u=((e,t,n={})=>{var r,o;const s=Math.max(0,null!==(r=n.minTempo)&&void 0!==r?r:90),a=Math.max(0,null!==(o=n.maxTempo)&&void 0!==o?o:180),l=[];return e.forEach((e=>{let n=60/(e.interval/t);for(;n<s;)n*=2;for(;n>a;)n/=2;let r=!1,o=e.peaks.length;l.forEach((t=>{if(t.tempo===n&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],r=!0),t.tempo>n-.5&&t.tempo<n+.5){const r=2*Math.abs(t.tempo-n);o+=(1-r)*t.peaks.length,t.score+=(1-r)*e.peaks.length}})),r||l.push({peaks:e.peaks,score:o,tempo:n})})),l})((e=>{const t=[];return e.forEach(((n,r)=>{const o=Math.min(e.length-r,10);for(let s=1;s<o;s+=1){const o=e[r+s]-n;t.some((e=>e.interval===o&&(e.peaks.push(n),!0)))||t.push({interval:o,peaks:[n]})}})),t})(a),t,n);return u.sort(((e,t)=>t.score-e.score)),u};addEventListener("message",(({data:e})=>{try{if("analyze"===e.method){const{id:t,params:{channelData:n,sampleRate:r,tempoSettings:s}}=e,a=((e,t,n)=>{const r=o(e,t,n);if(0===r.length)throw new Error("The given channelData does not contain any detectable beats.");return r[0].tempo})(n,r,s);postMessage({error:null,id:t,result:{tempo:a}})}else{if("guess"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{id:t,params:{channelData:n,sampleRate:r,tempoSettings:s}}=e,{bpm:a,offset:l}=((e,t,n)=>{const r=o(e,t,n);if(0===r.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:s,tempo:a}=r[0],l=Math.round(a),u=60/l;s.sort(((e,t)=>e-t));let c=s[0]/t;for(;c>u;)c-=u;return{bpm:l,offset:c}})(n,r,s);postMessage({error:null,id:t,result:{bpm:a,offset:l}})}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}}))}]);`; // tslint:disable-line:max-line-length
